<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>cookie practice</title>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
    crossorigin="anonymous"
  />

  <style>
    .modal-header {
        background-color: rgb(64, 139, 243);
    }

    .fs-5 {
        color: white;
    }

    .modal-header .btn-close {
        color: white;
    }

    .box {
        display: flex;
        background-color: rgba(127, 255, 191, 0.495);
        text-align: center;
        flex-direction: column;
        
    }

    .box-h1 {
        font-size: 20px;
        display: flex;
        justify-content: center;
        font-style: oblique;
    }

    .box-h2 {
        font-size: 14px;
        line-height: 2;
    }

    .date {
        font-weight: bold;
    }

    .practice {
        display: flex;
        flex-direction: row-reverse;
    }
  </style>
  <!------- axios cdn-------->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
  <body>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
  <h1>cookie 실습입니다.</h1>
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">안내</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ></button>
        </div>
        <div class="modal-body">
          <box class = "box">
            <h1 class = "box-h1"><br>인터넷익스플로러(IE) 지원 종료 안내</h1>
            <br>
            <h2 class = "box-h2">인터넷익스플로러(IE) 서비스 지원이 <span class = date>2022년 6월 15일 종료</span>됨에 따라 안전하고 원활한 LH청약센터 이용을 위해 크롬, 사파리, 엣지등의 웹브라우저를 이용해주시기 바랍니다.</h2>
          </box>
          <div class = practice>
            <input type="checkbox" id="cookie" ">
            <label for="cookie">오늘 하루 보지 않음</label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="close()">Close</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    console.log('popup >>', '<%= popup %>' );
    //checkbox.checked === true; ''
    //checkbox.checked === false; 'hide'

    const myModal = new bootstrap.Modal('#exampleModal');

    // popup 쿠키 값이 ''이면, 모달 보여주기
    if ('<%= popup%>' === ''){
        myModal.show();
        //show() js 코드로 모달을 오픈하는 매서드
    }


    // 모달에서 닫기 버튼 클릭
    function close() {
      // 체크박스가 체크되어 있다면
      // POST /setCookie 요청을 보냄 (back에서 popup 쿠키 설정)
      console.log(document.querySelector('#cookie').checked)

      if (document.querySelector('#cookie').checked) {
        console.log(checked)
        axios({
          url: '/setCookie',
          method: 'post',
        })
      }
    }
  </script>
  </body>
</html>